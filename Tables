CREATE DATABASE DoubleTCloud
;

Create TABLE Users (
    UserID integer unsigned AUTO_INCREMENT not null,
	Username varchar(32) not null,
    UPassword char(32) not null,
    FName varchar(32) not null,
    SName varchar(32),
    Email varchar(64) not null,
    MyMusic integer unsigned not null,
    ProfPic varchar(64) not null,
    PRIMARY KEY(UserID),
    UNIQUE(Username),
    UNIQUE(Email),
    UNIQUE(MyMusic))
;

CREATE TABLE Artists (
    UserID Integer unsigned not null,
    Artistname varchar(64) not null,
    Country varchar(32) not null,
    CovPic varchar(64) not null,
    Facebook varchar(255),
    Instagram varchar(255),
    Twitter varchar(255),
    Website varchar(255),
    Bio TEXT,
    PRIMARY KEY(UserID),
    FOREIGN KEY (UserID) REFERENCES users(UserID)
);


CREATE TABLE Albums (
    AlbumID Integer Unsigned not null AUTO_INCREMENT,
    Albumname varchar(64) not null,
    Art varchar(64) not null,
    Released Datetime not null,
    UserID Integer Unsigned not null,
    PRIMARY KEY(AlbumID),
    FOREIGN KEY (UserID) REFERENCES artists(UserID)
);

CREATE TABLE Tracks (
    TrackID Integer Unsigned not null AUTO_INCREMENT,
    Trackname varchar(64) not null,
    Length Time not null,
    Genre varchar(32) not null,
    mp3File varchar(64) not null,
    PRIMARY KEY(TrackID)
);

CREATE TABLE AlbumTracks(
    AlbumID Integer Unsigned not null,
    TrackID Integer Unsigned not null,
    PRIMARY KEY(AlbumID, TrackID),
    FOREIGN KEY(AlbumID) REFERENCES albums(AlbumID),
    FOREIGN KEY(TrackID) REFERENCES tracks(TrackID)
);

CREATE TABLE TrackArtists(
    TrackID Integer Unsigned not null,
    UserID Integer Unsigned not null,
    PRIMARY KEY(TrackID, UserID),
    FOREIGN KEY(TrackID) REFERENCES tracks(TrackID),
    FOREIGN KEY(UserID) REFERENCES artists(UserID)
);

